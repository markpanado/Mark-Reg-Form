var ruler=ruler||{};jQuery(function(a){a(".mark-reg-form [data-depends]").each(function(){this_depends=this;depends=a('.mark-reg-form [name="'+a(this).data("depends")+'"]');depends_type=depends.prop("type");depends_value=a(this).data("depends-value");var b=true;if(depends_type=="radio"){b=function(){return depends.parent().find(":checked").val()==depends_value};depends.each(function(){a(this).change(function(){a(this_depends).prop("disabled",a(this).val()!=depends_value)}).change()})}ruler[a(this).prop("name")]={required:{depends:b}}});(MRF={radioCheckBox:function(){a(".mark-reg-form .field-radio, .mark-reg-form .field-checkbox").each(function(){var b=a('label.error[style*="inline"]',this).length?"add":"remove";a(".field",this)[b+"Class"]("error")})},radioCheckBoxBehaviour:function(){a(".mark-reg-form .field-radio input, .mark-reg-form .field-checkbox input").change(function(){MRF.radioCheckBox()})},init:function(){MRF.radioCheckBoxBehaviour()}}).init();a("body").append('<div id="mark-reg-form-mask"></div>');a(".mark-reg-form select").each(function(){a(this).val(a(this).data("selected-index")).bind("change keyup focus",function(){a(this).parent().find(".html-display").html((x=a(this).find(":selected").data("html-display"))?x:"")}).change()});a(".field-radio, .field-checkbox",".mark-reg-form").find('.field input[data-selected="1"]').parent().parent().each(function(){if(!a(this).find("input:checked").length){a(this).find('input[data-selected="1"]').prop("checked",true)}});a('.mark-reg-form input[type="text"]:visible').each(function(){if(a(this).css("visibility")!="hidden"){a(this).keyup(function(){if(!a(".mark-reg-form").data("fingered")){a(".mark-reg-form").data("fingered",1)}});return false}});a('input[type="date"]').datepicker({dateFormat:"yy-mm-dd",});window.onbeforeunload=function(b){b=b||window.event;if(a(".mark-reg-form").data("fingered")){if(b){b.returnValue="Sure?"}return"Sure?"}};a(".validate").validate({rules:ruler});a(".mark-reg-form").submit(function(){MRF.radioCheckBox();if(a(this).valid()){a("#mark-reg-form-mask").fadeIn();if(a(this).data("confirm-submit")){if(!(result=confirm("Are you sure?"))){a("#mark-reg-form-mask").fadeOut()}a(this).data("fingered",0);if(result){that=this;setTimeout(function(){that.submit()},600);return !result}else{return result}}}})});